<template name="rea.albums.view">
    <section class="section">
        <div class="container">
            {{#unless Template.subscriptionsReady}}
                {{> loading}}
            {{else}}
                {{#with album}}
                    <nav class="level">
                        <div class="level-left">
                            <div class="level-item">
                                <div>
                                    <h1 class="title">
                                        {{this.name}}
                                    </h1>
                                    <h3 class="subtitle" style="margin-top: 5px;">
                                        {{description}}
                                    </h3>
                                </div>
                            </div>
                        </div>
                        <div class="level-right">
                            <div class="level-item">
                                <div>
                                    <p class="heading">
                                        by {{this.owner.fullName}}
                                    </p>
                                    <p class="title">
                                        {{countPhotos}} photos
                                    </p>
                                </div>
                            </div>
                        </div>
                    </nav>
                    <hr>
                    {{#if canManage}}
                        <div class="control is-grouped is-pulled-right">
                            <p class="control">
                                <label for="photos" class="button is-success">
                                    Upload photos
                                    <input type="file" id="photos" multiple hidden>
                                </label>
                            </p>
                            <p class="control">
                                <button class="button is-info js-share-album">
                                    Share
                                </button>
                            </p>
                            <p class="control">
                                <button class="button is-warning js-edit-album">
                                    Edit album
                                </button>
                            </p>
                            <p class="control">
                                <button class="button is-danger js-remove-album">
                                    Remove album
                                </button>
                            </p>
                        </div>
                        <div class="is-clearfix"></div>
                    {{/if}}
                    <div class="gallery">
                        {{#each photo in this.photos}}
                            <div class="gallery__item" style="background-image: url({{fileURL photo}});">
                                <a href="{{pathFor 'rea.albums.photo.view' albumId=_id photoId=photo._id}}">
                                </a>
                            </div>
                        {{/each}}
                    </div>
                {{else}}
                    <h1 class="title has-text-centered">
                        Album not found :/
                    </h1>
                {{/with}}
            {{/unless}}
        </div>
    </section>
    {{#if photoView}}
        {{> Template.dynamic template="rea.photo.modal"}}
    {{/if}}
</template>