<template name="rea.profile">
    <section class="section">
        <div class="container">
            <h1 class="title">My profile</h1>
            <hr>
            <div class="columns">
                {{#with currentUser}}
                    <div class="column">
                        <nav class="panel">
                            <div class="panel-heading">Profile</div>
                            <div class="panel-block">
                                <span class="panel-icon">
                                    <i class="fa fa-user"></i>
                                </span>
                                {{fullName}}
                            </div>
                            <div class="panel-block">
                                <span class="panel-icon">
                                    <i class="fa fa-envelope"></i>
                                </span>
                                {{emails.[0].address}}
                            </div>
                            <div class="panel-block">
                                <span class="panel-icon">
                                    <i class="fa fa-lock"></i>
                                </span>
                                ********
                            </div>
                            <div class="panel-block">
                                <span class="panel-icon">
                                    <i class="fa fa-registered"></i>
                                </span>
                                {{formatDate createdAt}}
                            </div>
                        </nav>
                    </div>
                {{/with}}
                <div class="column">
                    <h2 class="subtitle">Change password</h2>
                    {{#autoForm schema=changePasswordForm id="rea.profile.change-password" resetOnSuccess=true}}
                        <label class="label">{{afFieldLabelText name="oldPassword"}}</label>
                        <p class="control">
                            {{> afFieldInput name="oldPassword" class="input"}}
                            <span class="help is-danger">{{{afFieldMessage name='oldPassword'}}}</span>
                        </p>
                        <label class="label">{{afFieldLabelText name="newPassword"}}</label>
                        <p class="control">
                            {{> afFieldInput name="newPassword" class="input"}}
                            <span class="help is-danger">{{{afFieldMessage name='newPassword'}}}</span>
                        </p>
                        <label class="label">{{afFieldLabelText name="confirmPassword"}}</label>
                        <p class="control">
                            {{> afFieldInput name="confirmPassword" class="input"}}
                            <span class="help is-danger">{{{afFieldMessage name='confirmPassword'}}}</span>
                        </p>
                        <p class="control">
                            <button type="submit" class="button is-primary">
                                Save
                            </button>
                        </p>
                    {{/autoForm}}
                </div>
            </div>
        </div>
    </section>
</template>
